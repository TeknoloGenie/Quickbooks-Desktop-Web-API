"use strict";angular.module("cnsSteelSales",["ngAnimate","ngCookies","ngResource","ngMessages","ui.router","ngSanitize","ngMaterial","lbServices","md.data.table","ngNotificationsBar"]).constant("APP",{apiUrl:"http://localhost:3000/api"}).config(["$stateProvider","$urlRouterProvider","LoopBackResourceProvider","$httpProvider","APP","notificationsConfigProvider","$locationProvider","$sceDelegateProvider",function(e,t,r,o,s,a,n,i){r.setAuthHeader("X-Access-Token"),r.setUrlBase(s.apiUrl),i.resourceUrlWhitelist(["self"]),o.defaults.useXDomain=!0,delete o.defaults.headers.common["X-Requested-With"],o.interceptors.push(["$q","$location","LoopBackAuth","notifications",function(e,t,r,o){return a.setAutoHide(!0),a.setHideDelay(3e3),{responseError:function(s){if(401==s.status&&(r.clearUser(),r.clearStorage(),o.showError({message:s.data.error.message}),t.nextAfterLogin=t.path(),t.path("/login")),422==s.status&&s.data.error.details)for(var a in s.data.error.details.messages)s.data.error.details.messages.hasOwnProperty(a)&&s.data.error.details.messages[a].forEach(function(e){o.showError({message:e})});return e.reject(s)}}}]),e.state("root",{url:"",templateUrl:"views/root.html",controller:"RootCtrl"}).state("404",{url:"/404",templateUrl:"404.html"}).state("root.login",{url:"/login",templateUrl:"views/login.html",controller:"LoginCtrl"}).state("root.app",{url:"/app","abstract":!0,templateUrl:"views/app/application.html",controller:"ApplicationCtrl",authenticate:!0}).state("root.app.dashboard",{url:"/dashboard",templateUrl:"views/app/dashboard.html",controller:"DashboardCtrl",authenticate:!0}).state("root.app.customers",{url:"/customers",templateUrl:"views/app/customers.html",controller:"CustomersCtrl",authenticate:!0}).state("root.app.estimates",{url:"/estimates",templateUrl:"views/app/estimates.html",controller:"EstimatesCtrl",authenticate:!0}).state("root.app.items",{url:"/items",templateUrl:"views/app/items.html",controller:"ItemsCtrl",authenticate:!0}).state("root.app.salesOrders",{url:"/sales-orders",templateUrl:"views/app/sales-orders.html",controller:"SalesOrdersCtrl",authenticate:!0}),t.otherwise("/404")}]).run(["QuickBooks","$rootScope",function(e,t){t.requestUpdatedData=function(){e.queueTransaction({modelName:"Customer",method:"GET"}),e.queueTransaction({modelName:"Item",method:"GET"}),e.queueTransaction({modelName:"SalesOrder",method:"GET"}),e.queueTransaction({modelName:"Estimate",method:"GET"})},t.requestUpdatedData()}]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="lbServices"),function(e,t,r){function o(e){var t=e.match(/^(?:https?:)?\/\/([^\/]+)/);return t?t[1]:null}var s="http://0.0.0.0:3000/api",a="authorization",n=o(s)||location.host,i=t.module("lbServices",["ngResource"]);i.factory("User",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var o=e(s+"/Users/:id",{id:"@id"},{prototype$__findById__accessTokens:{params:{fk:"@fk"},url:s+"/Users/:id/accessTokens/:fk",method:"GET"},prototype$__destroyById__accessTokens:{params:{fk:"@fk"},url:s+"/Users/:id/accessTokens/:fk",method:"DELETE"},prototype$__updateById__accessTokens:{params:{fk:"@fk"},url:s+"/Users/:id/accessTokens/:fk",method:"PUT"},prototype$__get__accessTokens:{isArray:!0,url:s+"/Users/:id/accessTokens",method:"GET"},prototype$__create__accessTokens:{url:s+"/Users/:id/accessTokens",method:"POST"},prototype$__delete__accessTokens:{url:s+"/Users/:id/accessTokens",method:"DELETE"},prototype$__count__accessTokens:{url:s+"/Users/:id/accessTokens/count",method:"GET"},create:{url:s+"/Users",method:"POST"},createMany:{isArray:!0,url:s+"/Users",method:"POST"},upsert:{url:s+"/Users",method:"PUT"},replaceOrCreate:{url:s+"/Users/replaceOrCreate",method:"POST"},upsertWithWhere:{url:s+"/Users/upsertWithWhere",method:"POST"},exists:{url:s+"/Users/:id/exists",method:"GET"},findById:{url:s+"/Users/:id",method:"GET"},replaceById:{url:s+"/Users/:id/replace",method:"POST"},find:{isArray:!0,url:s+"/Users",method:"GET"},findOne:{url:s+"/Users/findOne",method:"GET"},updateAll:{url:s+"/Users/update",method:"POST"},deleteById:{url:s+"/Users/:id",method:"DELETE"},count:{url:s+"/Users/count",method:"GET"},prototype$updateAttributes:{url:s+"/Users/:id",method:"PUT"},createChangeStream:{url:s+"/Users/change-stream",method:"POST"},login:{params:{include:"user"},interceptor:{response:function(e){var r=e.data;return t.setUser(r.id,r.userId,r.user),t.rememberMe=e.config.params.rememberMe!==!1,t.save(),e.resource}},url:s+"/Users/login",method:"POST"},logout:{interceptor:{response:function(e){return t.clearUser(),t.clearStorage(),e.resource}},url:s+"/Users/logout",method:"POST"},confirm:{url:s+"/Users/confirm",method:"GET"},resetPassword:{url:s+"/Users/reset",method:"POST"},getCurrent:{url:s+"/Users/:id",method:"GET",params:{id:function(){var e=t.currentUserId;return null==e&&(e="__anonymous__"),e}},interceptor:{response:function(e){return t.currentUserData=e.data,e.resource}},__isGetCurrentUser__:!0}});return o.patchOrCreate=o.upsert,o.updateOrCreate=o.upsert,o.patchOrCreateWithWhere=o.upsertWithWhere,o.update=o.updateAll,o.destroyById=o.deleteById,o.removeById=o.deleteById,o.patchAttributes=o.prototype$updateAttributes,o.getCachedCurrent=function(){var e=t.currentUserData;return e?new o(e):null},o.isAuthenticated=function(){return null!=this.getCurrentId()},o.getCurrentId=function(){return t.currentUserId},o.modelName="User",o}]),i.factory("QuickBooks",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var o=e(s+"/QuickBooks/:id",{id:"@id"},{queueTransaction:{url:s+"/QuickBooks/queueTransaction",method:"POST"}});return o.modelName="QuickBooks",o}]),i.factory("Employee",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var o=e(s+"/Employees/:id",{id:"@id"},{create:{url:s+"/Employees",method:"POST"},createMany:{isArray:!0,url:s+"/Employees",method:"POST"},upsert:{url:s+"/Employees",method:"PUT"},replaceOrCreate:{url:s+"/Employees/replaceOrCreate",method:"POST"},upsertWithWhere:{url:s+"/Employees/upsertWithWhere",method:"POST"},exists:{url:s+"/Employees/:id/exists",method:"GET"},findById:{url:s+"/Employees/:id",method:"GET"},replaceById:{url:s+"/Employees/:id/replace",method:"POST"},find:{isArray:!0,url:s+"/Employees",method:"GET"},findOne:{url:s+"/Employees/findOne",method:"GET"},updateAll:{url:s+"/Employees/update",method:"POST"},deleteById:{url:s+"/Employees/:id",method:"DELETE"},count:{url:s+"/Employees/count",method:"GET"},prototype$updateAttributes:{url:s+"/Employees/:id",method:"PUT"},createChangeStream:{url:s+"/Employees/change-stream",method:"POST"}});return o.patchOrCreate=o.upsert,o.updateOrCreate=o.upsert,o.patchOrCreateWithWhere=o.upsertWithWhere,o.update=o.updateAll,o.destroyById=o.deleteById,o.removeById=o.deleteById,o.patchAttributes=o.prototype$updateAttributes,o.modelName="Employee",o}]),i.factory("SalesOrder",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var o=e(s+"/SalesOrders/:id",{id:"@id"},{create:{url:s+"/SalesOrders",method:"POST"},createMany:{isArray:!0,url:s+"/SalesOrders",method:"POST"},upsert:{url:s+"/SalesOrders",method:"PUT"},replaceOrCreate:{url:s+"/SalesOrders/replaceOrCreate",method:"POST"},upsertWithWhere:{url:s+"/SalesOrders/upsertWithWhere",method:"POST"},exists:{url:s+"/SalesOrders/:id/exists",method:"GET"},findById:{url:s+"/SalesOrders/:id",method:"GET"},replaceById:{url:s+"/SalesOrders/:id/replace",method:"POST"},find:{isArray:!0,url:s+"/SalesOrders",method:"GET"},findOne:{url:s+"/SalesOrders/findOne",method:"GET"},updateAll:{url:s+"/SalesOrders/update",method:"POST"},deleteById:{url:s+"/SalesOrders/:id",method:"DELETE"},count:{url:s+"/SalesOrders/count",method:"GET"},prototype$updateAttributes:{url:s+"/SalesOrders/:id",method:"PUT"},createChangeStream:{url:s+"/SalesOrders/change-stream",method:"POST"}});return o.patchOrCreate=o.upsert,o.updateOrCreate=o.upsert,o.patchOrCreateWithWhere=o.upsertWithWhere,o.update=o.updateAll,o.destroyById=o.deleteById,o.removeById=o.deleteById,o.patchAttributes=o.prototype$updateAttributes,o.modelName="SalesOrder",o}]),i.factory("Estimate",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var o=e(s+"/Estimates/:id",{id:"@id"},{create:{url:s+"/Estimates",method:"POST"},createMany:{isArray:!0,url:s+"/Estimates",method:"POST"},upsert:{url:s+"/Estimates",method:"PUT"},replaceOrCreate:{url:s+"/Estimates/replaceOrCreate",method:"POST"},upsertWithWhere:{url:s+"/Estimates/upsertWithWhere",method:"POST"},exists:{url:s+"/Estimates/:id/exists",method:"GET"},findById:{url:s+"/Estimates/:id",method:"GET"},replaceById:{url:s+"/Estimates/:id/replace",method:"POST"},find:{isArray:!0,url:s+"/Estimates",method:"GET"},findOne:{url:s+"/Estimates/findOne",method:"GET"},updateAll:{url:s+"/Estimates/update",method:"POST"},deleteById:{url:s+"/Estimates/:id",method:"DELETE"},count:{url:s+"/Estimates/count",method:"GET"},prototype$updateAttributes:{url:s+"/Estimates/:id",method:"PUT"},createChangeStream:{url:s+"/Estimates/change-stream",method:"POST"}});return o.patchOrCreate=o.upsert,o.updateOrCreate=o.upsert,o.patchOrCreateWithWhere=o.upsertWithWhere,o.update=o.updateAll,o.destroyById=o.deleteById,o.removeById=o.deleteById,o.patchAttributes=o.prototype$updateAttributes,o.modelName="Estimate",o}]),i.factory("Customer",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var o=e(s+"/Customers/:id",{id:"@id"},{create:{url:s+"/Customers",method:"POST"},createMany:{isArray:!0,url:s+"/Customers",method:"POST"},upsert:{url:s+"/Customers",method:"PUT"},replaceOrCreate:{url:s+"/Customers/replaceOrCreate",method:"POST"},upsertWithWhere:{url:s+"/Customers/upsertWithWhere",method:"POST"},exists:{url:s+"/Customers/:id/exists",method:"GET"},findById:{url:s+"/Customers/:id",method:"GET"},replaceById:{url:s+"/Customers/:id/replace",method:"POST"},find:{isArray:!0,url:s+"/Customers",method:"GET"},findOne:{url:s+"/Customers/findOne",method:"GET"},updateAll:{url:s+"/Customers/update",method:"POST"},deleteById:{url:s+"/Customers/:id",method:"DELETE"},count:{url:s+"/Customers/count",method:"GET"},prototype$updateAttributes:{url:s+"/Customers/:id",method:"PUT"},createChangeStream:{url:s+"/Customers/change-stream",method:"POST"}});return o.patchOrCreate=o.upsert,o.updateOrCreate=o.upsert,o.patchOrCreateWithWhere=o.upsertWithWhere,o.update=o.updateAll,o.destroyById=o.deleteById,o.removeById=o.deleteById,o.patchAttributes=o.prototype$updateAttributes,o.modelName="Customer",o}]),i.factory("SalesRep",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var o=e(s+"/SalesReps/:id",{id:"@id"},{create:{url:s+"/SalesReps",method:"POST"},createMany:{isArray:!0,url:s+"/SalesReps",method:"POST"},upsert:{url:s+"/SalesReps",method:"PUT"},replaceOrCreate:{url:s+"/SalesReps/replaceOrCreate",method:"POST"},upsertWithWhere:{url:s+"/SalesReps/upsertWithWhere",method:"POST"},exists:{url:s+"/SalesReps/:id/exists",method:"GET"},findById:{url:s+"/SalesReps/:id",method:"GET"},replaceById:{url:s+"/SalesReps/:id/replace",method:"POST"},find:{isArray:!0,url:s+"/SalesReps",method:"GET"},findOne:{url:s+"/SalesReps/findOne",method:"GET"},updateAll:{url:s+"/SalesReps/update",method:"POST"},deleteById:{url:s+"/SalesReps/:id",method:"DELETE"},count:{url:s+"/SalesReps/count",method:"GET"},prototype$updateAttributes:{url:s+"/SalesReps/:id",method:"PUT"},createChangeStream:{url:s+"/SalesReps/change-stream",method:"POST"}});return o.patchOrCreate=o.upsert,o.updateOrCreate=o.upsert,o.patchOrCreateWithWhere=o.upsertWithWhere,o.update=o.updateAll,o.destroyById=o.deleteById,o.removeById=o.deleteById,o.patchAttributes=o.prototype$updateAttributes,o.modelName="SalesRep",o}]),i.factory("ItemInventory",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var o=e(s+"/ItemInventories/:id",{id:"@id"},{create:{url:s+"/ItemInventories",method:"POST"},createMany:{isArray:!0,url:s+"/ItemInventories",method:"POST"},upsert:{url:s+"/ItemInventories",method:"PUT"},replaceOrCreate:{url:s+"/ItemInventories/replaceOrCreate",method:"POST"},upsertWithWhere:{url:s+"/ItemInventories/upsertWithWhere",method:"POST"},exists:{url:s+"/ItemInventories/:id/exists",method:"GET"},findById:{url:s+"/ItemInventories/:id",method:"GET"},replaceById:{url:s+"/ItemInventories/:id/replace",method:"POST"},find:{isArray:!0,url:s+"/ItemInventories",method:"GET"},findOne:{url:s+"/ItemInventories/findOne",method:"GET"},updateAll:{url:s+"/ItemInventories/update",method:"POST"},deleteById:{url:s+"/ItemInventories/:id",method:"DELETE"},count:{url:s+"/ItemInventories/count",method:"GET"},prototype$updateAttributes:{url:s+"/ItemInventories/:id",method:"PUT"},createChangeStream:{url:s+"/ItemInventories/change-stream",method:"POST"}});return o.patchOrCreate=o.upsert,o.updateOrCreate=o.upsert,o.patchOrCreateWithWhere=o.upsertWithWhere,o.update=o.updateAll,o.destroyById=o.deleteById,o.removeById=o.deleteById,o.patchAttributes=o.prototype$updateAttributes,o.modelName="ItemInventory",o}]),i.factory("LoopBackAuth",function(){function e(){var e=this;o.forEach(function(t){e[t]=r(t)}),this.currentUserData=null}function t(e,t,r){try{var o=s+t;null==r&&(r=""),e[o]=r}catch(a){console.log("Cannot access local/session storage:",a)}}function r(e){var t=s+e;return localStorage[t]||sessionStorage[t]||null}var o=["accessTokenId","currentUserId","rememberMe"],s="$LoopBack$";return e.prototype.save=function(){var e=this,r=this.rememberMe?localStorage:sessionStorage;o.forEach(function(o){t(r,o,e[o])})},e.prototype.setUser=function(e,t,r){this.accessTokenId=e,this.currentUserId=t,this.currentUserData=r},e.prototype.clearUser=function(){this.accessTokenId=null,this.currentUserId=null,this.currentUserData=null},e.prototype.clearStorage=function(){o.forEach(function(e){t(sessionStorage,e,null),t(localStorage,e,null)})},new e}).config(["$httpProvider",function(e){e.interceptors.push("LoopBackAuthRequestInterceptor")}]).factory("LoopBackAuthRequestInterceptor",["$q","LoopBackAuth",function(e,t){return{request:function(s){var i=o(s.url);if(i&&i!==n)return s;if(t.accessTokenId)s.headers[a]=t.accessTokenId;else if(s.__isGetCurrentUser__){var u={body:{error:{status:401}},status:401,config:s,headers:function(){return r}};return e.reject(u)}return s||e.when(s)}}}]).provider("LoopBackResource",function(){this.setAuthHeader=function(e){a=e},this.setUrlBase=function(e){s=e,n=o(s)||location.host},this.getUrlBase=function(){return s},this.$get=["$resource",function(e){return function(t,r,o){var s=e(t,r,o);return s.prototype.$save=function(e,t){var r=s.upsert.call(this,{},this,e,t);return r.$promise||r},s}}]})}(window,window.angular),angular.module("cnsSteelSales").factory("AuthService",["User","$q","$rootScope","$state",function(e,t,r,o){function s(t,o){return e.login({username:t,password:o}).$promise.then(function(e){return r.currentUser=e.user,e.user})}function a(t){return e.logout(t).$promise.then(function(){r.currentUser=null,o.go("root.login")})}function n(){return e.isAuthenticated()}function i(){return e.getCurrent()}return{login:s,logout:a,isAuthenticated:n,getCurrentUser:i}}]),angular.module("cnsSteelSales").directive("breadcrumb",["$compile",function(e){return{restrict:"A",replace:!0,scope:{breadcrumb:"="},template:'<span>{{::breadcrumb.name}}<md-icon md-font-icon="fa fa-chevron-right" class="margin-left-10" ng-show="breadcrumb.children.length > 0"></md-icon></span>',link:function(t,r){void 0!==t.breadcrumb.children&&r.find("span").attr("hide-sm","");var o='<span breadcrumbs="breadcrumb.children"></span>';angular.isArray(t.breadcrumb.children)&&e(o)(t,function(e){r.append(e)})}}}]),angular.module("cnsSteelSales").directive("breadcrumbs",function(){return{restrict:"A",require:"^toolbar",replace:!0,scope:{breadcrumbs:"="},template:'<span class="breadcrumb" hide-sm ng-repeat="breadcrumb in ::breadcrumbs" ng-show="breadcrumb.active" breadcrumb="breadcrumb"></span>'}}),angular.module("cnsSteelSales").directive("sideMenu",function(){return{restrict:"E",template:'<md-content><side-menu-item ng-repeat="item in menu | orderBy:\'priority\'" item="item"></side-menu-item></md-content>',scope:{menu:"="}}}),angular.module("cnsSteelSales").directive("sideMenuItem",["$state",function(e){return{restrict:"E",scope:{item:"="},template:'<div ng-include="itemTemplate"></div>',link:function(t){function r(){var r=void 0===t.item.params?{}:t.item.params;return e.includes(t.item.state,r)}function o(){t.item.active=!0,t.item.open=!0,t.$emit("openParents")}t.itemTemplate="views/components/side-menu/side-menu-"+t.item.type+".html",t.item.url=e.href(t.item.state),t.toggleMenu=function(){t.$parent.$parent.$broadcast("toggleMenu",t.item,!t.item.open)},t.$on("toggleMenu",function(e,r,o){t.item===r?t.item.open=o:t.item.open=!1}),r()&&o(),t.$on("$locationChangeSuccess",function(){t.item.active=!1,t.item.open=!1,r()&&o()}),t.activeClass=function(){return r()?"md-accent":""},t.openLink=function(){var r=void 0===t.item.params?{}:t.item.params;e.go(t.item.state,r)},t.$on("openParents",function(){t.item.active=!0,t.item.open=!0})}}}]),angular.module("cnsSteelSales").controller("RootCtrl",["$scope","$state","AuthService",function(e,t,r){e.$on("$stateChangeSuccess",function(e,o){o.authenticate&&!r.isAuthenticated()&&t.go("root.login")})}]),angular.module("cnsSteelSales").controller("LoginCtrl",["$scope","AuthService","$mdToast","$location",function(e,t,r,o){e.login=function(){t.login(e.username,e.password).then(function(e){var t=o.nextAfterLogin||"/app/dashboard";o.nextAfterLogin=null,o.path(t)})["catch"](function(e){return e.status==-1?r.showSimple("failed to connect to the api"):void r.show(r.simple().content(e.data.error.message).position("top right").hideDelay(0).action("OK"))})}}]),angular.module("cnsSteelSales").controller("CustomersCtrl",["$scope","$rootScope","$mdDialog","$mdSidenav","Customer",function(e,t,r,o,s){t.modelName="customer",t.Model=s,e.totalRecords=s.count(),t.records=[],e.today=new Date,e.getRecords=function(){e.query.offset=(e.query.page-1)*e.query.limit,e.promise=s.find({filter:e.query}).$promise.then(function(e){t.records=e})},e.searchProperties=["FullName"],e.searchProperty="FullName",e.query={order:"FullName",limit:10,page:1},e.limitOptions=[10,50,100,{label:"All",value:function(){return e.totalRecords}}]}]),angular.module("cnsSteelSales").controller("EstimatesCtrl",["$scope","$rootScope","$mdDialog","$mdSidenav","Estimate",function(e,t,r,o,s){t.modelName="estimate",t.Model=s,e.totalRecords=s.count(),t.records=[],e.today=new Date,e.getRecords=function(){e.query.offset=(e.query.page-1)*e.query.limit,e.promise=s.find({filter:e.query}).$promise.then(function(e){t.records=e})},e.searchProperties=["TotalAmount"],e.searchProperty="TotalAmount",e.query={order:"TotalAmount",limit:10,page:1},e.limitOptions=[10,50,100,{label:"All",value:function(){return e.totalRecords}}]}]),angular.module("cnsSteelSales").controller("ItemsCtrl",["$scope","$rootScope","$mdDialog","$mdSidenav","ItemInventory",function(e,t,r,o,s){t.modelName="item",t.Model=s,e.totalRecords=s.count(),t.records=[],e.getRecords=function(){e.query.offset=(e.query.page-1)*e.query.limit,e.promise=s.find({filter:e.query}).$promise.then(function(e){t.records=e})},e.searchProperties=["FullName"],e.searchProperty="FullName",e.query={order:"FullName",limit:10,page:1},e.limitOptions=[10,50,100,{label:"All",value:function(){return e.totalRecords}}]}]),angular.module("cnsSteelSales").controller("ApplicationCtrl",["$scope","$timeout","$rootScope","$mdSidenav","$mdDialog","$mdToast","$mdUtil","AuthService","LoopBackAuth","$state","APP","Customer","Employee","QuickBooks","SalesRep",function(e,t,r,o,s,a,n,i,u,l,d,c,p,m,h){r.partialPath="",r.apiurl=d.apiUrl,r.customers=c.find(),r.employees=p.find(),r.salesReps=h.find(),e.logout=function(){i.logout(u.accessTokenId)},e.$on("$stateChangeStart",function(){var e=angular.element(document.querySelector("#app-content"));e.scrollTop=0}),e.saveRecord=function(){r.activeRecord.$save(function(t){e.closeRecord(),t.dob&&(t.dob=r.activeRecord=new Date(t.dob)),r.activeRecord=null},function(e){r.activeRecordError=e})},e.getPartialPath=function(){return"./views/app/partials/"+r.partialPath},e.closeRecord=function(){o("record").close()},e.openNewRecord=function(e){var t=e||{name:"default",description:"default description"};r.Model.create(t,function(e){e.dob&&(e.dob=new Date(e.dob)),r.activeRecord=e,r.records.push(r.activeRecord),r.editOrNew="New",r.partialPath=r.modelName+".html",o("record").toggle()})},e.deleteRecord=function(e,t){var o=s.confirm().title("Delete record?").textContent("Are you sure you want to delete this record?").ok("Yes delete!").cancel("Cancel");s.show(o).then(function(o){e.$delete(function(e){r.records.splice(t,1)})},function(){})},e.openEditRecord=function(e){r.activeRecord=e,r.editOrNew="Edit",r.partialPath=r.modelName+".html",o("record").toggle()},e.$on("$locationChangeSuccess",function(){t(function(){o("left").close()})}),e.closeRightSidenav=function(){o("right").close()},e.openSideNav=function(e){n.debounce(function(){o(e)&&o(e).toggle()},500)()},e.toggleNotificationsTab=function(t){e.openSideNav("notifications")},r.swapPartial=function(e){r.prevPartialPath=r.partialPath,r.prevModelName=r.modelName,r.modelName=e,r.partialPath=r.modelName+".html"},r.swapPartialBack=function(){r.modelName=r.prevModelName,r.partialPath=r.prevPartialPath},e.openReportIssue=function(){s.show({preserveScope:!0,clickOutsideToClose:!0,templateUrl:"views/components/report-issue.html",controller:["$scope","$mdDialog","Issue","$location",function(e,t,o,s){e.showIssueExample=!1,e.closeWizard=function(){t.hide()},e.issue={user:r.currentUser.id,status:"open",url:s.url()},e.reportIssue=function(){o.create(e.issue).then(function(e){t.hide(),Notify.show("Thank you for your feedback.")})}}]})},e.isMenuLocked=!0,e.isMenuCollapsing=!1,e.isHovering=!1,e.activateHover=function(){e.isHovering=!0},e.removeHover=function(){e.isHovering=!1},e.toggleMenuLock=function(){e.isMenuLocked=!e.isMenuLocked,e.isMenuCollapsing=!e.isMenuLocked,e.isMenuCollapsing===!0&&(e.isHovering=!1,t(function(){e.isMenuCollapsing=!1},400))},e.menuClass=function(){return e.isMenuLocked===!0?"":e.isMenuCollapsing===!0?"is-collapsing":1==e.isHovering?"admin-sidebar-collapsed hover":"admin-sidebar-collapsed"},e.menu=[{name:"Dashboard",icon:"fa fa-th-large",type:"link",state:"root.app.dashboard",priority:1},{name:"Customers",icon:"fa fa-users",type:"link",state:"root.app.customers",priority:2},{name:"Items",icon:"fa fa-shopping-bag",type:"link",state:"root.app.items",priority:2},{name:"Estimates",icon:"fa fa-calculator",type:"link",state:"root.app.estimates",priority:2},{name:"Sales Orders",icon:"fa fa-credit-card-alt",type:"link",state:"root.app.salesOrders",priority:2}],e.isFabOpen=!0,t(function(){e.isFabOpen=!1},0)}]),angular.module("cnsSteelSales").controller("DashboardCtrl",["$scope",function(e){}]);